在這段影片中，我們將重點介紹如何檢查系統所生成的輸出。

在將回應展示給使用者之前進行檢查，對於確保回應的質量、相關性及安全性非常重要，尤其是當這些回應用於自動化流程時。

我們將學習如何使用審查 API（Moderation API），但這次是用來檢查輸出的內容，以及如何透過額外的提示來評估輸出質量，再決定是否展示給使用者。

讓我們來深入了解這些範例。

我們之前已經討論過審查 API 在評估輸入時的應用，現在我們來看看它如何用於檢查輸出。

審查 API 也可以用來過濾和審查系統所生成的回應。以下是一個範例。

這是生成的回應：

我們將使用審查 API，如同在之前的影片中所見，來檢查這個回應是否被標記。

如你所見，這個回應並沒有被標記，並且在所有類別中的分數都非常低，這是很合理的，因為回應內容本身並沒有問題。一般來說，檢查輸出是很有必要的。

例如，如果你正在為敏感群體創建聊天機器人，你可能會設置較低的標準來標記輸出內容。通常，如果審查結果顯示內容有問題，你可以採取相應措施，比如回應一個備用答案或生成新的回應。

隨著我們對模型進行改進，它們也會變得越來越不容易生成有害的回應。

另一種檢查輸出的方法是讓模型自己評估它生成的回應是否滿意，並檢查是否符合你定義的某些標準。

這可以通過將生成的回應作為輸入的一部分提供給模型，並要求它評估回應的質量。這有很多種方式可以實現，下面我們來看一個範例。

系統訊息是："你是一個評估客戶服務代理回應是否足夠解答客戶問題的助手，並且檢查代理回應中引用的所有產品信息是否正確。產品信息、用戶和客服代理消息將由三個反引號框住。只回應 'Y' 或 'N'，'Y' 表示回應足夠解答問題並正確引用了產品信息，'N' 則表示否定。只輸出一個字母。"。

你也可以使用推理鏈式提示來實現這個目標。

這可能對模型來說稍微有點挑戰，因此你可以嘗試在這些步驟中加入一些指導方針。你可以加入一個類似於評分標準的指南，例如為考試或寫作評分所用的標準。

你還可以問，這個回應是否符合品牌語氣，並且如果品牌語氣對你非常重要，可以簡單列出一些品牌指南。接著我們加入客戶訊息，也就是生成這個回應的初始消息，然後粘貼我們之前獲取的產品信息。

現在我們將定義比較標準，包括客戶訊息、產品信息和代理回應，也就是之前我們所生成的回應。

接下來將這些格式化成消息列表並從模型中獲取回應。

模型回應說，產品信息是正確的，並且回應已經充分解答了問題。

總體來說，對於這類評估任務，我建議使用更高級的模型，因為它們在推理方面更強大，所以像 GPT-4 這樣的模型會表現得更好。

讓我們再試一個範例。

這個回應是："生活就像一盒巧克力"。

我們將加入檢查輸出的消息。

模型判斷這並不足以解答問題，並且也沒有正確使用已檢索的產品信息。

這個問題是："它是否正確使用了已檢索的信息？"

這是你想確保模型不會產生幻覺（即捏造不真實的信息）時的一個好提示。

你可以暫停影片並嘗試加入你自己的客戶訊息、回應和產品信息，來測試這種方法。

正如你所見，模型可以提供對生成輸出質量的反饋，這些反饋可以幫助你決定是否向用戶展示該回應，或者生成新的回應。你甚至可以嘗試為每個用戶查詢生成多個回應，然後讓模型選擇最合適的來展示給用戶。所以有很多不同的做法可以嘗試。總體來說，使用審查 API 來檢查輸出是一個不錯的做法，但讓模型自己評估回應可能在某些情況下對於即時反饋有幫助，以確保回應質量。

然而，我認為大多數情況下，這種方法可能並不必要，特別是當你使用像 GPT-4 這樣的高級模型時。

我其實很少見到有人在生產環境中使用這種方法，因為它會增加延遲並增加系統成本，因為你需要等待額外的模型調用，而且還會消耗更多的 token。如果你的應用或產品的錯誤率需要達到 0.0000001%，那麼或許你可以考慮這種方法。但總體來說，我不建議你在實際操作中使用它。在下一個影片中，我們將把我們學到的所有知識，從評估輸入、處理流程到檢查輸出，綜合起來，構建一個完整的端到端系統。

