# Classification 分類
Evaluate Inputs: Classification 評估輸入: 分類

在建立高品質且安全的系統時，「正確評估使用者的輸入內容」是非常重要的。特別是針對需要處理多樣情境的系統（如客服助理），可以透過查詢分類機制，選擇對應的回應指令，來提升回應的準確性與效率，以及安全性。

---

## 查詢分類的基本流程
若任務在不同情境下需要多組獨立指令，可先將查詢分類，然後根據分類結果選擇適用的指令集，這樣能提升處理效率。
1. 定義固定的分類類別
    * 主類別（primary category）
    * 次類別（secondary category）
2. 根據分類結果對應預設指令
    * 每個分類對應一組預設行為或指令流程

### 說明範例：客服助理系統
* 關閉帳號
    * 加入一些關於如何關閉帳號的說明
* 詢問某個產品
    * 提供更多產品資訊

### 結構化輸出（例如 JSON）
輸出 JSON 可以很容易將這個結果讀入程式中，例如用 Python 的 dictionary 結構，或者使用的語言中的其他資料格式，然後再將其作為下一步處理的輸入。

---

## 實作範例: 對客戶查詢進行分類以處理不同的情況
* 設定系統訊息:
    * 定義類別 (主類別、次類別)
    * 結構化輸出 (JSON 格式輸出，包含 `primary` 和 `secondary` 這兩個鍵)
* 使用設輸入:
    * 關閉帳號請求
* 模型輸出: (後面課程)
    * 可能提供關閉帳號的連結或說明。
```python
delimiter = "####"
system_message = f"""
You will be provided with customer service queries. \
The customer service query will be delimited with \
{delimiter} characters.
Classify each query into a primary category \
and a secondary category. 
Provide your output in json format with the \
keys: primary and secondary.

Primary categories: Billing, Technical Support, \
Account Management, or General Inquiry.

Billing secondary categories:
Unsubscribe or upgrade
Add a payment method
Explanation for charge
Dispute a charge

Technical Support secondary categories:
General troubleshooting
Device compatibility
Software updates

Account Management secondary categories:
Password reset
Update personal information
Close account
Account security

General Inquiry secondary categories:
Product information
Pricing
Feedback
Speak to a human

"""
user_message = f"""\
I want you to delete my profile and all of my user data"""
messages =  [  
{'role':'system', 
 'content': system_message},    
{'role':'user', 
 'content': f"{delimiter}{user_message}{delimiter}"},  
] 
response = get_completion_from_messages(messages)
print(response)
```
* 使用設輸入:
    * 詢問產品資訊
* 模型輸出: (後面課程)
    * 可能會加入電視的詳細資訊。
```python
user_message = f"""\
Tell me more about your flat screen tvs"""
messages =  [  
{'role':'system', 
 'content': system_message},    
{'role':'user', 
 'content': f"{delimiter}{user_message}{delimiter}"},  
] 
response = get_completion_from_messages(messages)
print(response)
```


---

