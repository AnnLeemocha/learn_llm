# Transforming 轉換
:::info
文字轉換任務的本質是將輸入的文字轉換為另一種格式、語言、語氣或風格。
:::
* 和「摘要、推論」不同，這裡的目標是**轉化輸入**，而非分析或萃取。

---

## 語言翻譯
大型語言模型訓練時參考了大量來自不同語言的網路文本，這使得模型具備翻譯能力。

### 翻譯
```python
# ---------------------------------------------------------
# 將以下英文文字翻譯成西班牙文： “嗨，我想訂購一台攪拌機”
# ---------------------------------------------------------
prompt = f"""
Translate the following English text to Spanish: \ 
```Hi, I would like to order a blender```
"""
response = get_completion(prompt)
print(response)
```

### 推斷語言
```python
# ---------------------------------------------------------
# 告訴我這是哪種語言： ...
# ---------------------------------------------------------
prompt = f"""
Tell me which language this is: 
```Combien coûte le lampadaire?```
"""
response = get_completion(prompt)
print(response)
```

### 一次處理多種翻譯
```python
# ---------------------------------------------------------
# 將以下文字翻譯成法文和西班牙語和英國海盜： “我想訂購一個籃球”
# ---------------------------------------------------------
prompt = f"""
Translate the following  text to French and Spanish
and English pirate: \
```I want to order a basketball```
"""
response = get_completion(prompt)
print(response)
```
有些語言的翻譯會因說話者與聽者的關係不同而改變，只要在提示中說明，語言模型就能做出對應的翻譯。
```python
# ---------------------------------------------------------
# 將以下文本以正式和非正式形式翻譯成西班牙語： “您想訂購一個枕頭嗎？”
# ---------------------------------------------------------
prompt = f"""
Translate the following text to Spanish in both the \
formal and informal forms: 
'Would you like to order a pillow?'
"""
response = get_completion(prompt)
print(response)
```

### 通用翻譯器
假設在經營一家跨國電子商務公司，客戶和員工來自不同國家，使用各自的母語。客戶會用不同語言提出 IT 問題，員工之間也可能無法直接溝通，因此我需要一個能即時翻譯多種語言的「通用翻譯器」。

來自不同語言的使用者訊息
```python
# ---------------------------------------------------------
# 1 - 系統效能比正常情況慢
# 2 - 我的顯示器有不亮的像素
# 3 - 我的滑鼠不工作
# 4 - 我的鍵盤控制鍵壞了
# 5 - 我的螢幕在閃爍
# ---------------------------------------------------------
user_messages = [
  "La performance du système est plus lente que d'habitude.",  # System performance is slower than normal         
  "Mi monitor tiene píxeles que no se iluminan.",              # My monitor has pixels that are not lighting
  "Il mio mouse non funziona",                                 # My mouse is not working
  "Mój klawisz Ctrl jest zepsuty",                             # My keyboard has a broken control key
  "我的屏幕在闪烁"                                               # My screen is flashing
] 
```
用迴圈一一處理每一則訊息
```python
for issue in user_messages:
    prompt = f"Tell me what language this is: ```{issue}```"
    lang = get_completion(prompt)
    print(f"Original message ({lang}): {issue}")

    prompt = f"""
    Translate the following  text to English \
    and Korean: ```{issue}```
    """
    response = get_completion(prompt)
    print(response, "\n")
```

---

## 語氣轉換 (Tone Transformation)
寫作風格可以根據目標受眾進行調整，而 ChatGPT 能根據需求產生不同語氣，像是正式、親切、專業或輕鬆等，幫助更有效地傳達訊息。

口語 → 商務信函
```python
# ---------------------------------------------------------
# 將以下內容從俚語翻譯為商務信函： “夥計，我是喬，看看這盞落地燈的規格。”
# ---------------------------------------------------------
prompt = f"""
Translate the following from slang to a business letter: 
'Dude, This is Joe, check out this spec on this standing lamp.'
"""
response = get_completion(prompt)
print(response)
```

---

## 格式轉換 (Format Conversion)
ChatGPT 很擅長不同格式間的轉換，例如 JSON、HTML、XML、Markdown 等等。

JSON → HTML表格 (含欄位標題)
```python
# ---------------------------------------------------------
# 將以下 Python 字典從 JSON 轉換為帶有列標題和標題的 HTML 表： {...}
# ---------------------------------------------------------
data_json = { "resturant employees" :[ 
    {"name":"Shyam", "email":"shyamjaiswal@gmail.com"},
    {"name":"Bob", "email":"bob32@gmail.com"},
    {"name":"Jai", "email":"jai87@gmail.com"}
]}

prompt = f"""
Translate the following python dictionary from JSON to an HTML \
table with column headers and title: {data_json}
"""
response = get_completion(prompt)
print(response)
```
展示 HTML
```python
from IPython.display import display, Markdown, Latex, HTML, JSON
display(HTML(response))
```

---

## 拼字檢查/語法檢查。
ChatGPT 最常見的應用之一是校對文本。
只要在提示中加入「校對」或「校對並更正」，模型就能識別你的需求，幫助檢查錯字、語法錯誤，並提供更自然的語句建議。

```python
# ---------------------------------------------------------
# 校對並修改以下文本，然後重寫修改後的版本。
# 如果沒有發現錯誤，就說「未發現錯誤」。
# 不要在文字周圍使用任何標點符號： ...
# ---------------------------------------------------------
text = [ 
  "The girl with the black and white puppies have a ball.",  # The girl has a ball.
  "Yolanda has her notebook.", # ok
  "Its going to be a long day. Does the car need it’s oil changed?",  # Homonyms
  "Their goes my freedom. There going to bring they’re suitcases.",  # Homonyms
  "Your going to need you’re notebook.",  # Homonyms
  "That medicine effects my ability to sleep. Have you heard of the butterfly affect?", # Homonyms
  "This phrase is to cherck chatGPT for speling abilitty"  # spelling
]
for t in text:
    prompt = f"""Proofread and correct the following text
    and rewrite the corrected version. If you don't find
    and errors, just say "No errors found". Don't use 
    any punctuation around the text:
    ```{t}```"""
    response = get_completion(prompt)
    print(response)
```
校對這段準備張貼到公開論壇的評論
```python
# ---------------------------------------------------------
# 校對並修改此評論：
# ---------------------------------------------------------
text = f"""
Got this for my daughter for her birthday cuz she keeps taking \
mine from my room.  Yes, adults also like pandas too.  She takes \
it everywhere with her, and it's super soft and cute.  One of the \
ears is a bit lower than the other, and I don't think that was \
designed to be asymmetrical. It's a bit small for what I paid for it \
though. I think there might be other options that are bigger for \
the same price.  It arrived a day earlier than expected, so I got \
to play with it myself before I gave it to my daughter.
"""
prompt = f"proofread and correct this review: ```{text}```"
response = get_completion(prompt)
print(response)
```
可以用 Python 套件 `redlines` 比較「原始評論」與「修正版」的差異，找出並顯示文字修改的部分。
```python
from redlines import Redlines

diff = Redlines(text,response)
display(Markdown(diff.output_markdown))
```

### 專業寫作風格轉換
```python
# ---------------------------------------------------------
# 校對並修改此評論。使其更具說服力。
# 確保它遵循 APA 風格指南並針對資深讀者。
# 以 markdown 格式輸出。
# 文字: ...
# ---------------------------------------------------------
prompt = f"""
proofread and correct this review. Make it more compelling. 
Ensure it follows APA style guide and targets an advanced reader. 
Output in markdown format.
Text: ```{text}```
"""
response = get_completion(prompt)
display(Markdown(response))
```

---

## 提示設計小技巧
| 目的 | 提示語技巧 |
| -------- | -------- |
| 限制輸出格式 | 明確要求 `Output as JSON`, `Only one word` |
| 控制語氣風格 | 指定 `formal/informal`, `business tone` |
| 轉換格式（如 HTML） | 說明輸入格式與目標格式 |
| 校正 vs. 重寫 | 可指定 `proofread only` 或 `rewrite` |
| 客製錯誤訊息處理 | 加上 `If no errors, reply: 'No errors found'` |

---

## 語法錯誤範例
https://writingprompts.com/bad-grammar-examples/


---

